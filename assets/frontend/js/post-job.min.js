jQuery(document).ready(function(i){var t=jQuery("#jb_company_logo_plupload"),a=jQuery("#jb_company_logo_filelist"),l=jQuery("#jb_company_logo_errorlist");new plupload.Uploader({browse_button:t.get(0),drop_element:a.get(0),url:wp.ajax.settings.url+"?action=jb-upload-company-logo&nonce="+jb_front_data.nonce,chunk_size:"1024kb",max_retries:1,multipart:!0,multi_selection:!1,filters:{max_file_size:"10mb",mime_types:[{title:wp.i18n.__("Image files","jobboardwp"),extensions:"jpg,jpeg,gif,png,bmp,ico,tiff"}],prevent_duplicates:!0,max_file_count:1},init:{Error:function(o,e){l.html("<p>Error! "+e.message+"</p>")},FileFiltered:function(n,o){l.empty(),n.getOption("multi_selection")||a.find(".um-fs-uploader-file").each(function(o,e){n.removeFile(e.id)})},FilesAdded:function(o,e){o.start()},FilesRemoved:function(o,e){jQuery.each(e,function(o,e){jQuery("#"+e.id).remove()}),a.find(".um-fs-uploader-file").length||l.empty(),t.prop("um-uploader-data",jQuery.extend(args,{files:e})).trigger("um_fs_FilesRemoved")},FileUploaded:function(o,e,n){if(200===n.status&&n.response){var a=JSON.parse(n.response);a?a.info&&0===a.OK?console.error(a.info):a.data&&(t.parents(".jb-uploader").addClass("jb-company-logo-uploaded"),t.parents(".jb-uploader").siblings(".jb-company-logo-wrapper").addClass("jb-company-logo-uploaded"),t.parents(".jb-uploader").siblings(".jb-company-logo-wrapper").find("img").attr("src",a.data[0].url),i("#jb_company_logo").val(a.data[0].name_saved),i("#jb_company_logo_hash").val(a.data[0].hash)):l.append("<p>Error! Wrong file upload server response.</p>")}else console.error("File was not loaded, Status Code %s",[n.status])},PostInit:function(o){t.prop("um-uploader",o).next("div").hide(),a.find(".um-fs-uploader-file").remove()},UploadProgress:function(o,e){jQuery("#"+e.id).find("b").html("<span>"+e.percent+"%</span>")},UploadComplete:function(o,e){}}}).init(),i(document.body).on("click",".jb-change-logo",function(){i(this).parents(".jb-company-logo-wrapper").siblings(".jb-uploader").removeClass("jb-company-logo-uploaded")}),i(document.body).on("click",".jb-clear-logo",function(){i("#jb_company_logo").val(""),i("#jb_company_logo_hash").val(""),i(this).parents(".jb-company-logo-wrapper").removeClass("jb-company-logo-uploaded"),i(this).parents(".jb-company-logo-wrapper").siblings(".jb-uploader").removeClass("jb-company-logo-uploaded")}),i(document.body).on("click",".jb-job-preview-submit, .jb-job-draft-submit",function(o){o.preventDefault(),i(this).siblings('input[name="jb-job-submission-step"]').val(i(this).attr("name")),i(this).parents("form").submit()}),i(document.body).on("click",'input[name="job_location_type"]',function(){var o=i(this).data("location_field"),e=i(this).parents(".jb-form-field-content");e.find(".jb-locations-fields").hide(),e.find(".jb-locations-fields").find("input").attr("disabled","disabled").prop("disabled",!0),e.find(".jb-"+o+"-location").show(),e.find(".jb-"+o+"-location").find("input").removeAttr("disabled").prop("disabled",!1)}),i('input[name="job_location_type"]:checked').trigger("click")});