jQuery(document).ready(function(i){jQuery(".jb-pages-select2").select2({ajax:{url:wp.ajax.settings.url,dataType:"json",delay:250,data:function(e){return{search:e.term,action:"jb_get_pages_list",page:e.page||1,nonce:jb_admin_data.nonce}},processResults:function(e,i){i.page=i.page||1;var a=[];return e&&jQuery.each(e,function(e,i){"total_count"!==e&&a.push({id:i[0],text:i[1]})}),{results:a,pagination:{more:10*i.page<e.total_count}}},cache:!0},placeholder:jQuery(this).data("placeholder"),minimumInputLength:0,allowClear:!0});var e=i(".jb-admin-colorpicker");e.length&&e.wpColorPicker();var a,e=i(".jb-datepicker");function t(){jQuery(".jb-forms-line").removeClass("jb-forms-line-conditioned").each(function(){void 0===jQuery(this).data("conditional")||jQuery(this).hasClass("jb-forms-line-conditioned")||(!function t(e){e.addClass("jb-forms-line-conditioned");var i=e.data("conditional");var a=i[1];var l=i[2];var n=e.data("prefix");var s=!0;{var r;-1!==i[0].indexOf("||")||void 0!==(r=jQuery("#"+n+"_"+i[0])).parents(".jb-forms-line").data("conditional")&&(s=t(r.parents(".jb-forms-line")))}var d="";e="";var o=!1;if("="===a){if(-1!==i[0].indexOf("||")){var c=!1,u=i[0].split("||");return jQuery.each(u,function(e){var i=jQuery("#"+n+"_"+u[e]);s=!(o=!1),void 0!==i.parents(".jb-forms-line").data("conditional")&&(s=t(i.parents(".jb-forms-line")));var a=i.prop("tagName").toLowerCase();"input"===a?(e=i.attr("type"),o="checkbox"===e?"1"==l?i.is(":checked"):!i.is(":checked"):i.val()==l):"select"===a&&(o=i.val()==l),o&&s&&(c=!0)}),c}"input"===(d=r.prop("tagName").toLowerCase())?(e=r.attr("type"),o="checkbox"===e?"1"===l?r.is(":checked"):!r.is(":checked"):r.val()===l):"select"===d&&(o=r.val()===l)}else"!="===a&&("input"===(d=r.prop("tagName").toLowerCase())?(e=r.attr("type"),o="checkbox"===e?"1"===l?!r.is(":checked"):r.is(":checked"):r.val()!==l):"select"===d&&(o=r.val()!==l));return o&&s}(jQuery(this))?jQuery(this).hide():jQuery(this).show())})}e.length&&e.each(function(){var e=i(this);e.datepicker({altField:e.siblings(".jb-datepicker-default-format"),altFormat:"yy-mm-dd"})}),i(document.body).on("change",".jb-datepicker",function(){var e=i(this);""===e.val()&&e.siblings(".jb-datepicker-default-format").val("")}),jb_init_helptips(),jQuery(".jb-media-upload").each(function(){var e=jQuery(this).find(".jb-forms-field"),i=e.data("default");""!==e.val()&&e.val()!==i?(e.siblings(".jb-set-image").hide(),e.siblings(".jb-clear-image").show(),e.siblings(".icon_preview").show()):(e.val()===i&&e.siblings(".icon_preview").show(),e.siblings(".jb-set-image").show(),e.siblings(".jb-clear-image").hide())}),"undefined"!=typeof wp&&wp.media&&wp.media.editor&&(jQuery(".jb-set-image").click(function(e){var i=jQuery(this);e.preventDefault(),a&&a.remove(),(a=wp.media({title:i.data("upload_frame"),button:{text:php_data.texts.select},multiple:!1})).on("select",function(){var e=a.state().get("selection").first().toJSON();i.siblings(".icon_preview").attr("src",e.url).show(),i.siblings(".jb-forms-field").val(e.url),i.siblings(".jb-media-upload-data-id").val(e.id),i.siblings(".jb-media-upload-data-width").val(e.width),i.siblings(".jb-media-upload-data-height").val(e.height),i.siblings(".jb-media-upload-data-thumbnail").val(e.thumbnail),i.siblings(".jb-media-upload-data-url").trigger("change"),i.siblings(".jb-media-upload-url").val(e.url),i.siblings(".jb-clear-image").show(),i.hide(),jQuery(document).trigger("jb_media_upload_select",[i,e])}),a.open()}),jQuery(".icon_preview").click(function(e){jQuery(this).siblings(".jb-set-image").trigger("click")}),jQuery(".jb-clear-image").click(function(){var e=jQuery(this),i=e.siblings(".jb-forms-field").data("default");e.siblings(".jb-set-image").show(),e.hide(),e.siblings(".icon_preview").attr("src",i),e.siblings(".jb-media-upload-data-id").val(""),e.siblings(".jb-media-upload-data-width").val(""),e.siblings(".jb-media-upload-data-height").val(""),e.siblings(".jb-media-upload-data-thumbnail").val(""),e.siblings(".jb-forms-field").val(i),e.siblings(".jb-media-upload-data-url").trigger("change"),e.siblings(".jb-media-upload-url").val(i),jQuery(document).trigger("jb_media_upload_clear",e)})),jQuery(document.body).on("change",".jb-forms-field",function(){(0<jQuery(".jb-forms-line[data-conditional*='\""+jQuery(this).data("field_id")+"\",']").length||0<jQuery(".jb-forms-line[data-conditional*='"+jQuery(this).data("field_id")+"|']").length||0<jQuery(".jb-forms-line[data-conditional*='|"+jQuery(this).data("field_id")+"']").length)&&t()}),t()});